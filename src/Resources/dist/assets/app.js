const R=(e,t)=>{if(_.isNil(t)){let a=useAppStore().languages;t=a.length?a[0].slug:null}if(e&&typeof e=="object"){if(t in e&&(e[t]||e[t]==0))e=e[t];else for(var o in e)if(e[o]||e[o]===0){e=e[o];break}typeof e=="object"&&(e="")}return e},C=(e,t)=>{const o=e.__vccOpts||e;for(const[a,n]of t)o[a]=n;return o},P=window.Vue.unref,A={props:["model","item"],methods:{addNewSubcategory(){var e;this.model.createNewEntry(),this.model.getRow().category_id=(e=this.item)==null?void 0:e.id}}},g=window.Vue.createElementVNode,N=window.Vue.toDisplayString,O=window.Vue.createTextVNode,F=window.Vue.withModifiers,M=window.Vue.openBlock,z=window.Vue.createElementBlock,G={class:"sitetree__item__wrapper --addNew"},K={class:"sitetree__item"},U=["title"];function q(e,t,o,a,n,i){return M(),z("div",G,[g("div",K,[g("a",{"data-toggle":"tooltip",onClick:t[0]||(t[0]=F(w=>i.addNewSubcategory(),["prevent"])),title:e.__("Pridať podkategóriu"),href:"#"},[t[1]||(t[1]=g("i",{class:"fa fa-plus"},null,-1)),O(" "+N(o.item?e.__("Pridajte do %s").replace("%s",("useGetLocaleFieldValue"in e?e.useGetLocaleFieldValue:P(R))(o.item.name)):e.__("Pridajte hlavnú kategóriu")),1)],8,U),g("p",null," "+N(e.__("alebo pretiahnite existujúcu.")),1)])])}const H=C(A,[["render",q],["__scopeId","data-v-23bdf10b"]]),J=Object.freeze(Object.defineProperty({__proto__:null,default:H},Symbol.toStringTag,{value:"Module"})),Q={props:["model"],data(){return{put:!0,sortable:!0}},created(){this.model.hideTab("categories")},computed:{isDeepLevel(){return this.model.getParentModels().length>0},items(){return this.model.getRowsSorted({withAllRows:!0})},firstLevel(){return _.filter(this.items,{category_id:null})},firstLevelDisabledTypes(){return["url","model"]}}},S=window.Vue.toDisplayString,m=window.Vue.createElementVNode,u=window.Vue.openBlock,f=window.Vue.createElementBlock,T=window.Vue.createCommentVNode,D=window.Vue.resolveComponent,L=window.Vue.createBlock,W=window.Vue.createVNode,X=window.Vue.resolveDynamicComponent,Y=window.Vue.mergeProps,B=window.Vue.withCtx,Z={key:0,class:"box box--presets mb-2"},$={class:"box-header box-header--actions"},ee={class:"box-header__left"},te={class:"box-header__title"},oe={key:0,class:"box-header__description"},ne={class:"box-body"};function ie(e,t,o,a,n,i){const w=D("CategoriesTreeItem"),p=D("CategoriesAddNew");return u(),f("div",null,[i.isDeepLevel===!1?(u(),f("div",Z,[m("div",$,[m("div",ee,[m("div",null,[m("h1",te,S(o.model.name),1),o.model.title?(u(),f("p",oe,S(o.model.title),1)):T("",!0)])]),t[2]||(t[2]=m("div",{class:"box-header__right"},null,-1))]),m("div",ne,[(u(),L(X(n.sortable?"draggable":"div"),Y({tag:"div",onStart:t[0]||(t[0]=d=>o.model.onDragStart(d)),onChange:t[1]||(t[1]=d=>o.model.onDragChange(d,null,i.firstLevel))},o.model.getDragOptions(),{group:{put:n.put,group:o.model.table},list:i.firstLevel,handle:".sitetree__item__drag",draggable:".--draggableItem",itemKey:"id"}),{item:B(({element:d})=>[(u(),L(w,{level:0,model:o.model,item:d,items:i.items,sortable:n.sortable,put:n.put,key:d.id},null,8,["model","item","items","sortable","put"]))]),footer:B(()=>[W(p,{model:o.model},null,8,["model"])]),_:1},16,["group","list"]))])])):T("",!0)])}const se=C(Q,[["render",ie]]),re=Object.freeze(Object.defineProperty({__proto__:null,default:se},Symbol.toStringTag,{value:"Module"})),le=window.Vue.unref,x=window._,de={name:"CategoriesTreeItem",props:["item","parentRow","items","sortable","put","level"],data(){let e=this.getActiveModel("categories");return{showSubTree:!1,row:x.cloneDeep(this.item||e.emptyRowInstance()),model:e,errors:[]}},watch:{},computed:{nextLevel(){return this.item?x.filter(this.items,{category_id:this.item.id}):[]},canDisplayNextLevel(){var e;if(!(!((e=this.row)!=null&&e.id)||this.model.insertable===!1))return this.level<this.model.getSettings("recursivity.max_depth")}},methods:{removeItem(e){this.model.removeRow(e.id)},addNewSubcategory(){var e;this.model.createNewEntry(),this.model.getRow().category_id=(e=this.item)==null?void 0:e.id}}},r=window.Vue.createElementVNode,l=window.Vue.openBlock,c=window.Vue.createElementBlock,b=window.Vue.createCommentVNode,v=window.Vue.toDisplayString,h=window.Vue.normalizeClass,ae=window.Vue.renderList,me=window.Vue.Fragment,V=window.Vue.resolveComponent,y=window.Vue.createBlock,ce=window.Vue.createVNode,_e=window.Vue.resolveDynamicComponent,ue=window.Vue.mergeProps,E=window.Vue.withCtx,we=window.Vue.createSlots,ge={class:"sitetree__item__wrapper --draggableItem"},be={class:"sitetree__item"},pe={key:0,class:"sitetree__item__drag"},fe={class:"sitetree__item__inputs"},ve={class:"mb-0"},he=["title"],Ve={class:"sitetree__item__actions"},ye=["title"],Ce=["title"],ke={key:0,class:"sitetree__subtree"};function Ne(e,t,o,a,n,i){const w=V("buttons-action"),p=V("CategoriesTreeItem",!0),d=V("CategoriesAddNew");return l(),c("div",ge,[r("div",be,[o.sortable&&n.row.id?(l(),c("div",pe,t[5]||(t[5]=[r("i",{class:"fa fa-grip-vertical"},null,-1)]))):b("",!0),r("div",fe,[r("h6",ve,[r("span",{title:e.__("Kategória č. %s",o.item.id),"data-toggle":"tooltip"},v(("useGetLocaleFieldValue"in e?e.useGetLocaleFieldValue:le(R))(o.item.name)),9,he),r("small",null," ("+v(e.__("%s podkategórii").replace("%s",i.nextLevel.length))+" / "+v(e.__("%s produktov").replace("%s",o.item.products_count||0))+") ",1)])]),r("div",Ve,[i.canDisplayNextLevel?(l(),c("button",{key:0,class:h(["btn btn-sm",{"btn-primary":n.showSubTree,"btn-default":!n.showSubTree}]),onClick:t[0]||(t[0]=s=>n.showSubTree=!n.showSubTree)},[r("i",{class:h(["fa",{"fa-angle-down":!n.showSubTree,"fa-angle-up":n.showSubTree}])},null,2)],2)):b("",!0),i.canDisplayNextLevel?(l(),c("button",{key:1,class:"btn btn-sm btn-default",onClick:t[1]||(t[1]=s=>i.addNewSubcategory()),title:e.__("Pridať podkategóriu"),"data-toggle":"tooltip"},t[6]||(t[6]=[r("i",{class:"fa fa-plus"},null,-1)]),8,ye)):b("",!0),r("button",{"data-toggle":"tooltip",title:e.__("Upraviť podkategóriu"),class:h(["btn btn-sm",{"btn-success":n.model.isActiveRow(n.row),"btn-default":!n.model.isActiveRow(n.row)}]),onClick:t[2]||(t[2]=s=>n.model.selectRow(n.row))},t[7]||(t[7]=[r("i",{class:"far fa-edit"},null,-1)]),10,Ce),(l(!0),c(me,null,ae(n.model.getButtonsForRow(n.row),(s,k)=>(l(),y(w,{key:k,button:s,row:n.row,buttonKey:k,model:n.model},null,8,["button","row","buttonKey","model"]))),128))])]),n.showSubTree?(l(),c("div",ke,[(l(),y(_e(o.sortable?"draggable":"div"),ue({tag:"div",onStart:t[3]||(t[3]=s=>n.model.onDragStart(s)),onChange:t[4]||(t[4]=s=>n.model.onDragChange(s,o.item,i.nextLevel))},n.model.getDragOptions(),{group:{put:o.put,group:n.model.table},list:i.nextLevel,handle:".sitetree__item__drag",draggable:".--draggableItem",itemKey:"id"}),we({item:E(({element:s})=>[(l(),y(p,{model:n.model,item:s,parentRow:o.item,sortable:o.sortable,put:o.put,items:o.items,level:o.level+1,key:s.id},null,8,["model","item","parentRow","sortable","put","items","level"]))]),_:2},[i.nextLevel.length==0?{name:"footer",fn:E(()=>[ce(d,{model:n.model,item:o.item},null,8,["model","item"])]),key:"0"}:void 0]),1040,["group","list"]))])):b("",!0)])}const Se=C(de,[["render",Ne]]),Te=Object.freeze(Object.defineProperty({__proto__:null,default:Se},Symbol.toStringTag,{value:"Module"})),j=window._,I=Object.assign({"./components/CategoriesAddNew.vue":J,"./components/CategoriesTree.vue":re,"./components/CategoriesTreeItem.vue":Te});Object.keys(I).forEach(e=>{const t=j.upperFirst(j.camelCase(e.split("/").pop().replace(/\.\w+$/,"")));window.crudadmin.components[t]=I[e].default});
